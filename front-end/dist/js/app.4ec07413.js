(function(){"use strict";var t={3860:function(t,e,r){var o=r(7764),a=r(4108);const s={class:"page-wrap"};function n(t,e,r,o,n,i){const l=(0,a.E1)("nav-bar"),c=(0,a.E1)("router-view");return(0,a.Wz)(),(0,a.An)("div",null,[(0,a.K2)(l),(0,a.QD)("div",s,[(0,a.K2)(c)])])}var i=r(9096);const l={class:"nav-bar"},c={class:"logo-wrap"},u=["src"],d={class:"cart-link-container"},m={key:0,class:"cart-button"},p={key:0,class:"cart-button"},g={key:1,class:"userName"};function h(t,e,r,o,s,n){const h=(0,a.E1)("router-link");return(0,a.Wz)(),(0,a.An)("div",l,[(0,a.K2)(h,{to:"/products",class:"product-link"},{default:(0,a.Ql)((()=>[(0,a.QD)("div",c,[(0,a.QD)("img",{src:s.logo},null,8,u)])])),_:1}),(0,a.QD)("div",d,[(0,a.K2)(h,{to:"/cart",class:"cart-link"},{default:(0,a.Ql)((()=>[s.isLoggedIn?((0,a.Wz)(),(0,a.An)("button",m,"Cart")):(0,a.g1)("",!0)])),_:1}),(0,a.K2)(h,{to:"/login",class:"cart-link"},{default:(0,a.Ql)((()=>[s.isLoggedIn?(0,a.g1)("",!0):((0,a.Wz)(),(0,a.An)("button",p,"Login"))])),_:1}),s.isLoggedIn?((0,a.Wz)(),(0,a.An)("button",{key:0,class:"cart-button",onClick:e[0]||(e[0]=(...t)=>n.logout&&n.logout(...t))}," Logout ")):(0,a.g1)("",!0),s.email?((0,a.Wz)(),(0,a.An)("span",g,"Hi, "+(0,i.WA)(this.email),1)):(0,a.g1)("",!0)])])}r(3248);var f=r(2964),v=r.p+"img/logo-hexagon.d2768201.svg",w={name:"NavBar",data(){return{logo:v,isLoggedIn:!!localStorage.getItem("token"),email:localStorage.getItem("email")}},components:{},methods:{async logout(){try{const t=await f.c.post("/api/logout");localStorage.removeItem("token"),localStorage.removeItem("email"),localStorage.removeItem("userId"),this.isLoggedIn=!1,this.$router.push("/login"),console.log(t)}catch(t){console.error("There was an error!",t)}},async login(){try{const t=await f.c.post("/api/login",{email:this.email,password:this.password});"Sign in successful"===t.data.message?(console.log(t.data),console.log(t.data),localStorage.setItem("token",t.data.token),localStorage.setItem("email",t.data.user.email),localStorage.setItem("userId",t.data.user.id),this.$router.push("/products")):alert("Invalid email or password.")}catch(t){console.error("There was an error!",t)}}},watch:{$route:function(){this.isLoggedIn=!!localStorage.getItem("token"),this.email=localStorage.getItem("email")}}},I=r(4100);const y=(0,I.c)(w,[["render",h]]);var b=y,k={name:"App",components:{NavBar:b}};const A=(0,I.c)(k,[["render",n]]);var Q=A,D=r(7464);const W=(0,a.QD)("h1",null,"Shopping Cart",-1),S={key:0},z={key:0,class:"checkout-button"},E={key:1};function C(t,e,r,o,s,n){const i=(0,a.E1)("shopping-cart-list");return(0,a.Wz)(),(0,a.An)("div",null,[W,s.cartItems.length>0?((0,a.Wz)(),(0,a.An)("div",S,[(0,a.K2)(i,{cartItems:s.cartItems,onRemoveFromCart:e[0]||(e[0]=t=>n.removeFromCart(t))},null,8,["cartItems"]),0!=s.cartItems.length?((0,a.Wz)(),(0,a.An)("button",z," Checkout ")):(0,a.g1)("",!0)])):(0,a.g1)("",!0),0===s.cartItems.length?((0,a.Wz)(),(0,a.An)("div",E," You current have no items in your cart! ")):(0,a.g1)("",!0)])}const P=["src"],L={class:"details-wrap"},$=["onClick"];function O(t,e,r,o,s,n){return(0,a.Wz)(),(0,a.An)("div",null,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(r.cartItems,(e=>((0,a.Wz)(),(0,a.An)("div",{class:"product-container",key:e.id},[(0,a.QD)("img",{class:"product-image",src:e.imageName},null,8,P),(0,a.QD)("div",L,[(0,a.QD)("h3",null,(0,i.WA)(e.name),1),(0,a.QD)("p",null,(0,i.WA)(e.price),1)]),(0,a.QD)("button",{onClick:r=>t.$emit("remove-from-cart",e.id),class:"remove-button"}," Remove from Cart ",8,$)])))),128))])}var T={name:"ShoppingCartList",props:{cartItems:{type:Array,required:!0}}};const _=(0,I.c)(T,[["render",O]]);var F=_;const K=f.c.create({baseURL:"https://vue-project-b2kl.onrender.com"});var N=K,j={name:"ShoppingCartPage",data(){return{cartItems:[],userId:localStorage.getItem("userId")}},methods:{async removeFromCart(t){try{const e=await N.delete(`/api/users/${this.userId}/cart/${t}`),r=e.data;this.cartItems=r.filter((t=>null!==t))}catch(e){console.error("There was an error!",e)}}},components:{ShoppingCartList:F},async created(){const t=await N.get(`/api/users/${this.userId}/cart`),e=t.data;null!==e&&(this.cartItems=e.filter((t=>null!==t)),console.log(this.cartItems))}};const R=(0,I.c)(j,[["render",C]]);var x=R;const M=(0,a.QD)("h1",null,"Products",-1),U={class:"grid-wrap"};function V(t,e,r,o,s,n){const i=(0,a.E1)("products-list");return(0,a.Wz)(),(0,a.An)("div",null,[M,(0,a.QD)("div",U,[(0,a.K2)(i,{products:s.products},null,8,["products"])])])}const q={class:"grid-wrap"},Y=["src"],B=(0,a.QD)("button",null,"View Details",-1);function H(t,e,r,o,s,n){const l=(0,a.E1)("router-link");return(0,a.Wz)(),(0,a.An)("div",q,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(r.products,(t=>((0,a.Wz)(),(0,a.An)("div",{class:"product-item",key:t.id},[(0,a.QD)("img",{src:t.imageName},null,8,Y),(0,a.QD)("h3",null,(0,i.WA)(t.name),1),(0,a.QD)("p",null,(0,i.WA)(t.price),1),(0,a.K2)(l,{to:`/products/${t.id}`},{default:(0,a.Ql)((()=>[B])),_:2},1032,["to"])])))),128))])}var G={name:"ProductsList",props:{products:{type:Array,required:!0}}};const J=(0,I.c)(G,[["render",H]]);var X=J,Z={name:"ProductsPage",data(){return{products:[],email:localStorage.getItem("email")}},components:{ProductsList:X},async created(){try{const t=await N.get("/api/products");this.products=t.data}catch(t){console.error("There was an error!",t)}}};const tt=(0,I.c)(Z,[["render",V]]);var et=tt;const rt={key:0},ot={class:"img-wrap"},at=["src"],st={class:"product-details"},nt={class:"price"},it={key:1,class:"grey-button"},lt={key:0,class:"notificationMsg"},ct={key:1};function ut(t,e,r,o,s,n){const l=(0,a.E1)("NotFoundPage");return s.product?((0,a.Wz)(),(0,a.An)("div",rt,[(0,a.QD)("div",ot,[(0,a.QD)("img",{src:s.product.imageName},null,8,at)]),(0,a.QD)("div",st,[(0,a.QD)("h1",null,(0,i.WA)(s.product.name),1),(0,a.QD)("h3",nt,(0,i.WA)(s.product.price),1),n.itemIsInCart?(0,a.g1)("",!0):((0,a.Wz)(),(0,a.An)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>n.addToCart&&n.addToCart(...t)),class:"add-to-cart"}," Add to Cart ")),n.itemIsInCart?((0,a.Wz)(),(0,a.An)("button",it," Item already in card ")):(0,a.g1)("",!0)]),s.message.length>0?((0,a.Wz)(),(0,a.An)("div",lt,(0,i.WA)(s.message),1)):(0,a.g1)("",!0)])):((0,a.Wz)(),(0,a.An)("div",ct,[(0,a.K2)(l)]))}function dt(t,e,r,o,s,n){return(0,a.Wz)(),(0,a.An)("h1",null,"404: Page Not Found")}var mt={name:"NotFoundPage"};const pt=(0,I.c)(mt,[["render",dt]]);var gt=pt,ht={name:"productDetailPage",data(){return{product:{},cartItems:[],userId:localStorage.getItem("userId"),message:""}},methods:{async addToCart(){if(this.isLoggedIn)try{await N.post(`/api/users/${this.userId}/cart`,{id:this.$route.params.id}),this.message="Added to cart!",this.cartItems.push({id:this.$route.params.id})}catch(t){console.error("There was an error!",t)}else alert("You must be logged in to add items to the cart!")}},computed:{isLoggedIn(){return!!localStorage.getItem("token")},itemIsInCart(){console.log(this.cartItems),console.log(this.$route.params.id);const t=this.cartItems.some((t=>null!==t&&t.id===this.$route.params.id));return console.log(t),t}},components:{NotFoundPage:gt},async created(){try{const t=await N.get(`/api/products/${this.$route.params.id}`);this.product=t.data;const e=await N.get(`/api/users/${this.userId}/cart`);this.cartItems=e.data}catch(t){console.error("There was an error!",t)}}};const ft=(0,I.c)(ht,[["render",ut]]);var vt=ft;const wt={class:"formContainer"},It=(0,a.QD)("h1",null,"Register here:",-1),yt={class:"form-group"},bt=(0,a.QD)("label",{for:"email"},"Email address",-1),kt={key:0,class:"error"},At={class:"form-group"},Qt=(0,a.QD)("label",{for:"password"},"Password",-1),Dt={key:0,class:"error"},Wt=(0,a.QD)("button",{type:"submit"},"Register",-1);function St(t,e,r,s,n,l){return(0,a.Wz)(),(0,a.An)("div",wt,[It,(0,a.QD)("form",{onSubmit:e[2]||(e[2]=(0,o.Y7)(((...t)=>l.register&&l.register(...t)),["prevent"])),class:"registerForm"},[(0,a.QD)("div",yt,[bt,(0,a.wt)((0,a.QD)("input",{for:"email1",type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>n.email=t),placeholder:"Email",class:"form-control"},null,512),[[o.Og,n.email]]),n.emailError?((0,a.Wz)(),(0,a.An)("div",kt,(0,i.WA)(n.emailError),1)):(0,a.g1)("",!0)]),(0,a.QD)("div",At,[Qt,(0,a.wt)((0,a.QD)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),placeholder:"Password",class:"form-control"},null,512),[[o.Og,n.password]]),n.passwordError?((0,a.Wz)(),(0,a.An)("div",Dt,(0,i.WA)(n.passwordError),1)):(0,a.g1)("",!0)]),Wt],32)])}var zt={name:"RegisterPage",data(){return{email:"",password:"",emailError:"",passwordError:""}},methods:{async register(){let t=!1;if(this.emailError="",this.passwordError="",this.email.includes("@")||(this.emailError="Please enter a valid email address.",t=!0),(this.password.length<8||""===this.password)&&(this.passwordError="Password must be at least 8 characters long.",t=!0),!t)try{const t=await N.get("/api/users"),e=t.data,r=e.filter((t=>t.email===this.email));if(r.length>0)return void(this.emailError="Email already registered.");await N.post("/api/users",{email:this.email,password:this.password}),alert("Registered!"),this.email="",this.password="",this.$router.push("/login")}catch(e){console.error("There was an error!",e)}}}};const Et=(0,I.c)(zt,[["render",St]]);var Ct=Et;const Pt={class:"formContainer"},Lt=(0,a.QD)("h1",null,"Login here:",-1),$t=(0,a.QD)("button",{type:"submit"},"Login",-1),Ot=(0,a.QD)("a",{href:"/login",class:"login-link"},"Register",-1);function Tt(t,e,r,s,n,i){const l=(0,a.E1)("router-link");return(0,a.Wz)(),(0,a.An)("div",Pt,[Lt,(0,a.QD)("form",{onSubmit:e[2]||(e[2]=(0,o.Y7)(((...t)=>i.login&&i.login(...t)),["prevent"])),class:"loginForm"},[(0,a.wt)((0,a.QD)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>n.email=t),placeholder:"Email",required:""},null,512),[[o.Og,n.email]]),(0,a.wt)((0,a.QD)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),placeholder:"Password",required:""},null,512),[[o.Og,n.password]]),$t,(0,a.K2)(l,{to:"/register",class:"cart-link"},{default:(0,a.Ql)((()=>[Ot])),_:1})],32)])}var _t={name:"LoginPage",data(){return{email:"",password:""}},methods:{async login(){try{const t=await N.post("/api/login",{email:this.email,password:this.password});"Sign in successful"===t.data.message?(console.log(t.data),console.log(t.data),localStorage.setItem("token",t.data.token),localStorage.setItem("email",t.data.user.email),localStorage.setItem("userId",t.data.user.id),this.$router.push("/products")):alert("Invalid email or password.")}catch(t){console.error("There was an error!",t)}}}};const Ft=(0,I.c)(_t,[["render",Tt]]);var Kt=Ft;(0,o.W0)(Q).use(D.gv({history:D.oz(),routes:[{path:"/products",component:et},{path:"/cart",component:x,beforeEnter:(t,e,r)=>{localStorage.getItem("token")?r():r({component:gt})}},{path:"/register",component:Ct},{path:"/login",component:Kt,beforeEnter:(t,e,r)=>{localStorage.getItem("token")?r({path:"/products"}):r()}},{path:"/products/:id",component:vt},{path:"/",redirect:"/products"},{path:"/:pathMatch(.*)*",component:gt}]})).mount("#app")}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,o,a,s){if(!o){var n=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],s=t[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&s||n>=s)&&Object.keys(r.O).every((function(t){return r.O[t](o[l])}))?o.splice(l--,1):(i=!1,s<n&&(n=s));if(i){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[o,a,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,s,n=o[0],i=o[1],l=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var u=l(r)}for(e&&e(o);c<n.length;c++)s=n[c],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(u)},o=self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[999],(function(){return r(3860)}));o=r.O(o)})();
//# sourceMappingURL=app.4ec07413.js.map